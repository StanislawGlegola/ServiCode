databaseChangeLog:
  - changeSet:
      id: 1
      author: Stanislaw Glegola
      changes:
        - sql:
            sql: |
              CREATE TABLE customer (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                city VARCHAR(100) NOT NULL,
                postal_code VARCHAR(20) NOT NULL,
                street VARCHAR(255) NOT NULL
              );
              
              CREATE TABLE device (
                id INT PRIMARY KEY AUTO_INCREMENT,
                model VARCHAR(255) NOT NULL,
                serial_number VARCHAR(100) UNIQUE NOT NULL,
                manufacturer VARCHAR(255) NOT NULL,
                customer_id INT NOT NULL,
                FOREIGN KEY (customer_id) REFERENCES customer(id) ON DELETE CASCADE
              );
              
              CREATE TABLE technician (
                id INT PRIMARY KEY AUTO_INCREMENT,
                first_name VARCHAR(100) NOT NULL,
                last_name VARCHAR(100) NOT NULL,
                f_gaz VARCHAR(100) NOT NULL UNIQUE
              );
              
              CREATE TABLE protocol (
                id INT PRIMARY KEY AUTO_INCREMENT,
                start_date DATETIME NOT NULL,
                end_date DATETIME NULL,
                issue_description TEXT NULL,
                work_description TEXT NULL,
                materials TEXT NULL,
                notes TEXT NULL,
                customer_id INT NOT NULL,
                device_id INT NOT NULL,
                FOREIGN KEY (customer_id) REFERENCES customer(id) ON DELETE CASCADE,
                FOREIGN KEY (device_id) REFERENCES device(id) ON DELETE CASCADE
              );
